<!DOCTYPE html>
<html lang="ko"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org/">
<head>
    <title>mycgv</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="No-Cache" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta name="viewport" content="width=1024" />
    <meta name="keywords" content="CGV, 시지브이, 영화관, 극장, 영화, 티켓, 박스오피스, 극장, Movie, Theater, Cinema, Cgv, cgv, 예매, 상영작" />
    <meta name="description" content="CGV는 선진화된 관람문화와 최고의 서비스로 고객에게 잊을 수 없는 감동을 선사합니다. CGV홈페이지를 통해 영화 예매뿐만 아니라 그 이상의 서비스와 감동을 전달하고, 다양한 즐거움과 특별한 경험을 제공하고자 합니다." />
    <meta property="og:site_name" content="영화 그 이상의 감동. CGV"/>
    <meta id="ctl00_ctl00_og_title" property="og:title" content="영화 그 이상의 감동. CGV"></meta>


    <meta id="ctl00_ctl00_og_image" property="og:image" content="https://img.cgv.co.kr/WebApp/images/common/logo_new_kakao_prevw.png"></meta>
    <link rel="alternate" href="http://m.cgv.co.kr" />
    <link rel="shortcut icon" href="https://img.cgv.co.kr/theater_img/favicon.ico" type="image/x-icon" />
    <title id="ctl00_ctl00_headerTitle"></title>
    <link rel="shortcut icon" type="image/x-icon" href="https://img.cgv.co.kr/R2014/images/favicon.ico" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/webfont.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/reset.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/layout.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/module.css?20211209" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/content.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/common.css" />

    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/eggupdate.css" />
    <link rel="stylesheet" media="print" type="text/css" href="https://img.cgv.co.kr/R2014/css/print.css" />
    <link rel="stylesheet" type="text/css" href="https://img.cgv.co.kr/R2014/js/jquery.ui/smoothness/jquery-ui-1.10.4.custom.min.css" />

    <script type="text/javascript" src="/common/js/extraTheaters.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/app.config.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.validate.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.paging.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.ui/jquery-ui-1.10.4.custom.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.utils.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/app.utils.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.utils.pageing.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/app.init.js"></script>

    <!--[if lte IE 9]><script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.placeholder.js"></script><![endif]-->
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.dotdotdot.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/silverlight_link.js"></script>
    <script src="https://img.cgv.co.kr/R2014/js/slick/slick.js" type="text/javascript" charset="utf-8"></script>

    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/phototicket/phototicket.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/slick.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/slick-theme-custom.css" />

    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/icheck/login.timer.js"></script>
    <script src="https://img.cgv.co.kr/R2014/js/icheck/icheck.min.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="https://img.cgv.co.kr/R2014/js/icheck/iCheck.css" />
    <script type="text/javascript">
        $(document).ready(function(){
            $("#mycgv").addClass("on")
        });
    </script>
    <!-- 2020.05.07 감정지수/프리에그 프로젝트 추가 -->
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/preegg.css" />

    <!-- 각페이지 Header Start-->

    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/phototicket/phototicket.css" />
    <!--통합결제-->
    <link rel="stylesheet" type="text/css" href="https://img.cgv.co.kr/R2014/css/mypagenew.css" />

    <!--/각페이지 Header End-->
    <script type="text/javascript">
        //<![CDATA[
        _TRK_CP = "/홈";
        app.config('staticDomain', 'https://img.cgv.co.kr/R2014/')
            .config('imageDomain', 'https://img.cgv.co.kr')
            .config('isLogin', 'True');
        // AD FLOAT
        // 암호화 할 문자열과 키값(상수값)을 매개변수로 받는다.



        function EncryptAD(str, key) {
            output = new String;
            Temp = new Array();
            TextSize = str.length;
            for (i = 0; i < TextSize; i++) {
                // key 값을 원하는 대로 연산을 한다
                output += String.fromCharCode(str.charCodeAt(i) + parseInt(key) + 123 + i);
            }
            return output;
        }
        // 복호화
        // 암호화 된 문자열과 키값(상수값)을 매개변수로 받는다.
        function DecryptAD(str, key) {
            output = new String;
            Temp = new Array();
            TextSize = str.length;
            for (i = 0; i < TextSize; i++) {
                // 암호화시 사용한 연산과 같아야 한다.
                output += String.fromCharCode(str.charCodeAt(i) - (parseInt(key) + 123 + i));
            }
            return output;
        }
        function getCookieVal(offset) {
            var endstr = document.cookie.indexOf(";", offset);
            if (endstr == -1) endstr = document.cookie.length;
            return unescape(document.cookie.substring(offset, endstr));
        }
        function GetCookieAd(name) {
            var arg = name + "=";
            var alen = arg.length;
            var clen = document.cookie.length;
            var i = 0;
            while (i < clen) { //while open
                var j = i + alen;
                if (document.cookie.substring(i, j) == arg)
                    return getCookieVal(j);
                i = document.cookie.indexOf(" ", i) + 1;
                if (i == 0) break;
            } //while close
            return null;
        }
        function setCookieAD(name, value, expiredays) {
            var todayDate = new Date();
            todayDate.setTime(todayDate.getTime() + (expiredays * 24 * 60 * 60 * 1000));
            document.cookie = name + "=" + escape(value) + "; expires=" + todayDate.toGMTString() + "; path=/; domain=cgv.co.kr";
        }
        function CloseAD() {
            var AdUrl = window.location.href;
            var ArrAdUrl = AdUrl.split("/");
            var CurCookieName = 'CgvPopAd-' + ArrAdUrl[3];
            var CurCookieUrl = GetCookieAd(CurCookieName);
            var CookieUrl = ArrAdUrl[3];
            CookieUrl = EncryptAD(CookieUrl, "15442280");
            setCookieAD(CurCookieName, CookieUrl, '1');
            $(document).find('#ad_float1').hide();
        }
        function OpenAD() {
            var AdUrl = window.location.href;
            var ArrAdUrl = AdUrl.split("/");
            var CookieUrl = ArrAdUrl[3];
            var CurCookieName = 'CgvPopAd-' + ArrAdUrl[3];
            var CurCookieUrl = GetCookieAd(CurCookieName);
            if (CurCookieUrl == null) {
                CurCookieUrl = "";
            }
            else {
                CurCookieUrl = DecryptAD(CurCookieUrl, "15442280");
            }
            if (CurCookieUrl.indexOf(CookieUrl) != -1) {
                $(document).find('#ad_float1').hide();
            }
            //section.cgv.co.kr 매거진 체크
            var magazineckurl = GetCookieAd("CgvPopAd-magazine");
            if (magazineckurl != null) {
                var magazineck = DecryptAD(magazineckurl, "15442280");
                if (magazineck != null && magazineck == "magazine") {
                    //값이있는경우 표시하지않음
                    $(document).find('#ad_float1').hide();
                }
            }
        }
        //]]>
    </script>

</head>
<body class="">

<div th:replace="user/fragment/header :: header-user"></div>


<!-- Contaniner -->
<div id="contaniner"  class=""><!-- 벽돌 배경이미지 사용 시 class="bg-bricks" 적용 / 배경이미지가 없을 경우 class 삭제  -->

    <!-- Contents Area -->
    <div id="contents" class="">
        <!-- Contents Start -->

        <!--상단 쪽 common Erea-->
        <div th:replace="user/mycgv/fragment/common :: common-user"></div>
        <!-- 상단 common Erea 끝-->

        <div class="cols-content" id="menu">
            <div th:replace="user/mycgv/fragment/nav :: nav-user"></div>
            <div class="col-detail" id="mycgv_contents">

                <script type="text/javascript">
                    //<![CDATA[
                    var myVar;
                    jQuery(document).ready(function () {
                        myVar = setInterval(function () { checkCookieExp() }, 1000 * 10);
                    });
                    function checkCookieExp() {
                        //alert("도는건가");
                        $.ajax({
                            type: "POST",
                            url: "/common/ajax/loginExpireCheck.aspx/expireCheck",
                            data: "{ pageSize : 20 }",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            success: function (data) {
                                var rst = $.parseJSON(data.d);
                                rst = Number(rst) + 1;
                                if (rst > 1 && rst < 62) {
                                    //alert("크다");
                                    jQuery(".logpopup").removeClass("on").removeClass("off");
                                    jQuery(".logpopup").addClass("on");
                                    $('#expTime').text(rst);
                                    clearInterval(myVar);
                                    timerMyVar = setInterval(function () { expTimeValue() }, 1000);
                                } else {
                                    jQuery(".logpopup").removeClass("on").removeClass("off");
                                    jQuery(".logpopup").addClass("off");
                                }
                                //여기서 시간이 쿠키유효시간이 1분 미만이면 레이어 안내창을 표시
                                //if( 레이어가 떠있는 상태면 무시 처리 - 김홍우님 가이드
                            },
                            error: function (request, error) {
                                //alert("error:" + error);
                                clearInterval(myVar);
                            }
                        });
                        // 로그인 연장 확인 클릭 시
                        //clearInterval(myVar);
                    }
                    function expTimeValue() {
                        if (Number($('#expTime').text()) <= 0) {
                            clearInterval(timerMyVar);
                            window.location.href = "http://www.cgv.co.kr/user/login/logoutAuto.aspx";
                        }
                        else {
                            $('#expTime').text($('#expTime').text() - 1);
                        }
                    }
                    //팝업 닫기
                    jQuery(document).ready(function () {
                        $('.pop_corp_session .btn-close').click(function () {
                            $('.pop_corp_session').removeClass('on');
                        });
                    });
                    //팝업 창 가운데로 뜨도록
                    function fnOpenChapter() {
                        var obj = $('#layer-wrap');
                        var iHeight = (document.body.clientHeight / 2) - obj.height() / 2 + document.body.scrollTop;
                        var iWidth = (document.body.clientWidth / 2) - obj.width() / 2 + document.body.scrollLeft;
                        obj.css({
                            position: 'absolute'
                            , display: 'block'
                            , top: iHeight
                            , left: iWidth
                        });
                    }
                    //]]>
                </script>

                <div class="sect-mycgv-reserve movielog col3">
                    <div class="box-polaroid">
                        <div class="box-inner preegg" style="height: 120px; width:32%;">
                            <a href="/user/mycgv-movielog-expected" title="기대되는 영화" style="margin-top: -38px">
                                <img src="/img/mycgvEggIcon.png" alt="movielog" />
                                <h3 >기대되는 영화</h3>
                                <span>보고 싶은 영화들을 미리 <br>담아두고 싶다면?</span>

                            </a>
                        </div>
                        <div class="box-inner watched" style="height: 120px; width:32%;">
                            <a href="/user/movielog/mycgv-movielog-watched" title="내가 본 영화" style="margin-top: -35px">
                                <img src="/img/mycgvMovieIcon.png" alt="CGV" />
                                <h3>내가 본 영화</h3>
                                <span>관람한 영화들을 한번에 <br />모아 보고 싶다면?</span>
                            </a>
                        </div>
                        <div class="box-inner mvdiary" style="height: 120px; width:32%;">
                            <a href="/movies/point/mycgv-movielog-mylist" title="내가 쓴 평점" style="margin-top: -35px">
                                <img src="/img/mycgvReviewIcon.png" alt="CGV" />
                                <h3 >내가 쓴 평점</h3>
                                <span>관람 후 내 감상평을 적어 <br />추억하고 싶다면?</span>
                            </a>
                        </div>



                    </div>
                </div>
                <div class="tit-mycgv">
                    <h3>MY 예매내역</h3>
                    <p><em>0건</em> <a href="/user/mycgv/mycgv-reserve">예매내역 더보기</a></p>
                    <span>예매번호로만 티켓을 찾을 수 있으니 반드시 확인 부탁드립니다.</span>
                </div>

                <form name="aspnetForm" method="post" action="./default.aspx" id="aspnetForm">
                    <div>
                        <input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
                        <input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
                        <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTc0NzIwMTk3M2RkGpTZbHfO8pvW/Ta9En5loRX6E2E=" />
                    </div>
                    <div>

                        <input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="F268F2D4" />
                        <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdAANOZtRado8flmBd6Juf8OumAAaiyC+ogOIlg3pscMtiP2lKUwCIH8TI/sjrTPJzW37qSeqQYBLB9CRMYU4y53rNrIwxzA==" />
                    </div>
                    <!-- 팝업시작 -->
                    <!-- 팝업 노출 시 .layer-wrap 에 클래스 .off는 없애고 .on 추가해주세요.-->
                    <div class="layer-wrap pop_corp_session logpopup off">
                        <div class="pop_wrap">
                            <h1>자동 로그아웃 안내</h1>
                            <button type="button" class="btn-close">자동 로그아웃 안내 팝업 닫기</button>
                            <div class="pop-contents">
                                <div class="sect-corp-session">
                                    <div class="cf ss_con_wrap">
                                        <h5>자동 로그아웃 남은 시간 : <span class="col_red"><em><span id="expTime"></span></em>초</span></h5>
                                        <p>로그인 시간을 연장하시려면 <br />로그인 연장 버튼을 클릭해주세요.</p>
                                    </div>
                                    <div class="cf ss_btn_wrap">
                                        <a id="ctl00_ctl00_PlaceHolderContent_ChildPlaceHolderContents_LinkButton1" class="round inblack" href="javascript:__doPostBack(&#39;ctl00$ctl00$PlaceHolderContent$ChildPlaceHolderContents$LinkButton1&#39;,&#39;&#39;)"><span>로그인 연장</span></a>
                                        <a id="ctl00_ctl00_PlaceHolderContent_ChildPlaceHolderContents_LinkButton2" class="round gray" href="javascript:__doPostBack(&#39;ctl00$ctl00$PlaceHolderContent$ChildPlaceHolderContents$LinkButton2&#39;,&#39;&#39;)"><span>로그아웃</span></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 팝업끝 -->
                    <!-- MY 예매내역 -->
                    <input type="hidden" id="hidCancelReserveNo" name="hidCancelReserveNo" />
                    <div class="sect-base-booking">
                        <div class="box-polaroid">
                            <div class="box-inner">



                                <div class="lst-item">
                                </div>



                            </div>
                        </div>
                    </div>
                </form>
                <!-- //MY 예매내역 -->

                <!-- MY 참여이력 -->
                <div class="sect-mycgv-part">
                    <div class="box-polaroid type1">

                        <div class="box-inner">
                            <div class="tit-mycgv">
                                <h3>MY Q&amp;A</h3>
                                <p><em>0건</em> <a href="/user/mycgv/inquiry/mycgv-qna-list">MY Q&amp;A 더보기</a></p>
                            </div>
                            <div class="col-myqna">

                                <ul><li>고객님의 1:1 문의내역이 존재하지 않습니다.</li></ul>

                            </div>
                        </div>
                    </div>
                </div>

                <form name="targetform" id="targetform" method="post" novalidate="novalidate">
                    <input type="hidden" name="reverse_no" id="reverse_no" />
                </form>

                <script type="text/javascript" src="https://img.cgv.co.kr/R2014//js/system/crypto.js"></script>
            </div>
        </div>

        <script type="text/javascript">
            //<![CDATA[
            (function ($) {
                $(function () {
                    $('#go_edit_page').on('click', function () {
                        var win = window.open("/user/popup/mycgv-popupedit-profile", "profile", "left=0,top=o,width=445,height=440,toolbar=no,scrollbars=no");
                        win.focus();
                    });
                    $('#btn_set_my_favorite').on('click', function () {
                        var win = window.open("/user/popup/mycgv-favoriteTheaters", "url", "left=0,top=o,width=645,height=370,toolbar=no,scrollbars=no");
                        win.focus();
                    });

                    <!--MY 지난등급 이력보기 스크립트-->
                    $('#view_usergrade').on('click', function () {
                        var usergrade = document.getElementById("user_grade");
                        if(usergrade.style.display=='none'){
                            usergrade.style.display = '';
                        }else(usergrade.style.display=='')
                        {
                            usergrade.style.display = '';
                        }
                    });
                    $('#close_usergrade').on('click', function () {
                        var usergrade = document.getElementById("user_grade");
                        if(usergrade.style.display==''){
                            usergrade.style.display = 'none';
                        }else (usergrade.style.display=='')
                        {
                            usergrade.style.display = 'none';
                        }
                    });
                    $('#skipPersoninfo').on('click', function () {
                        var $ctn = $('#menu');
                        $ctn.attr({
                            tabIndex: -1
                        }).focus();
                        return false;
                    });
                    //mycgv 메뉴스킵
                    $('#skipMycgvMenu').on('click', function () {
                        var $ctn = $('#mycgv_contents');
                        $ctn.attr({
                            tabIndex: -1
                        }).focus();
                        return false;
                    });
                    //my cgv 상단영역 skip처리
                    var isGoContainer = "True";
                    if (isGoContainer == "True") {
                        location.href = location.href + "#contaniner";
                    }
                });
            })(jQuery);
            //]]>
        </script>
    </div>


    <!--티켓 취소 완료시 띄워줄 부분입니다. -->
    <div class="mask" onclick="btnClose()"
         style="position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; z-index: 100; background-color: rgba(0, 0, 0, 0.8); display: none" ></div>
    <div class="layer-wrap cancelPopup" style="margin-top: -382px; margin-left: -400px; position: fixed; display: none" tabindex="0"><div class="layer-contents" style="width:800px;height:765px;">
        <div class="popwrap ">
            <h4>예매 취소 완료</h4>
            <div class="pop-contents">
                <div class="wrap-reservationcancel">
                    <strong class="title">예매 취소가 완료되었습니다.</strong>
                    <div>
                        <strong>환불 안내</strong>
                        <p>신용카드 : 결제 후 3일 이내 취소 시 승인 취소되며, 3일 이후 매입 취소시 영업일 기준 3~5일 소요됩니다.</p>
                        <p>체크카드 : 결제 후 3일 이내 취소 시 당일 카드사에서 환불처리되며, 3일 이후 매입 취소 시 카드사에 따라 3~10일 소요됩니다.</p>
                        <p>
                            휴대폰 결제 : 결제 일자 기준 당월(1일~말일)취소만 가능하며, 익월 취소 관련 문의는 CGV고객센터(1544-1122)를 통해 확인 후&nbsp;&nbsp; 3~10일 이내 환불됩니다.<br>
                            ※ 당일 취소가 원칙이나 현장(매표소)에서 취소할 경우 익일 환불처리 될 수 있습니다.
                        </p>
                        <p>카카오페이 : 카카오페이머니나 카카오포인트를 사용하신 경우 각각의 잔액으로 원복되며, 카드 결제를 하신 경우는 카드사 정책에 따라 승인취소가 진행되며 3일 이후 매입 취소시 영업일 기준 3~10일 소요됩니다.</p>
                        <p>PAYCO : PAYCO 쿠폰/포인트를 사용하신 경우 각각의 쿠폰/포인트로 원복되며 쿠폰의 경우 조건에 따라 재사용이 불가 할 수 있습니다. 카드 결제금액은&nbsp;카드사 정책에 따라 승인취소가 진행되며&nbsp;3일 이후 매입 취소시 영업일 기준 3~10일 소요됩니다.</p>
                        <p>스마일페이 : 스마일캐시를 사용하신 경우 스마일캐시로 원복되며, 카드 결제금액은 카드사 정책에 따라 승인취소가 진행되며 3일 이후 매입취소 시 영업일 기준 3~10일 소요됩니다.</p>
                        <p>NAVER Pay : NAVER Pay 포인트를 사용하신 경우 NAVER Pay 포인트로 원복되며, 카드사 결제를 하신 경우는 카드사 정책에 따라 승인취소가 진행되며 3일 이후 매입 취소시 영업일 기준 3~10일 소요됩니다.</p>
                        <p>카카오톡 선물하기 복합상품 : 카카오톡 선물하기 복합상품 (2인 PKG / 1인 PKG)은 매점쿠폰 사용 시, 예매 티켓 환불 불가. ※ 단, 매점 쿠폰 미 사용 시, 예매 티켓 환불 가능하며 재 예매 시, 새로운 매점 쿠폰 발급.</p>
                        <p>
                            계좌이체<br>
                            결제일 기준 결제 당일~7일 이내 예매 취소 시 은행 별 기준은 아래와 같습니다.<br>
                            ① 예매 취소 후 즉시 환급되는 은행<br>
                            &nbsp;&nbsp;: 신한, 우체국, 전북, 경남, 광주, 대구, 새마을, 제주<br>
                            ② 예매 취소 후 3~5일 이내 환급되는 은행<br>
                            &nbsp;&nbsp;: 농협, 부산, SC제일은행, 우리은행, 그 外 기타 은행 (KEB하나은행/KB국민은행/씨티은행 등)<br>
                            ③ 결제일 기준 7일 이후 예매 취소 시<br>
                            &nbsp;&nbsp;: 계좌이체로 결제하신 경우 예매 취소일로부터 7일~10일 이내에 환급<br>
                            ※ 환불에 대한 문의는 은행사에서 확인 가능
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <button type="button" class="btn-close" onclick="btnClose()"> 닫기</button>
    </div>
    </div>


    <!--/ Contents End -->
</div>
<!-- /Contents Area -->
</div>
<!-- E Contaniner -->


<input type="hidden" name='memIdx' id='member_idx' th:value="${session.idx}">
<!-- S 예매하기 및 TOP Fixed 버튼 -->

<div th:replace="user/fragment/footer:: footer-user"></div>

</div>
</body>
<script th:inline="javascript">
    // 로그인 안되어있을때 mycgv 못들어오게 막음
    let memIdx=document.getElementById('member_idx').value;
    if(memIdx==null){
        alert("로그인 후 이용하세요.")
        location.href='/user/login';
    }

    // 예매내역 반복, 데이터가 없으면 예매내역이 없음으로 띄워줌
    /*<![CDATA[*/
    let ticketList = [[${ticketList}]];
    console.log(ticketList);
    /*]]>*/
    let lstitem=document.querySelector('.lst-item');
    if(ticketList.length==0){
        lstitem.innerText="고객님의 최근 예매내역이 존재하지 않습니다.";
    }else{
        ticketList.forEach(ticket=>{
            console.log(ticket)
            document.querySelector('.tit-mycgv > p> em').innerText=ticketList.length+'건';
            let src=ticket.scheduleDTO.movieDTO.poster;
            lstitem.innerHTML+=
                `
<div class="lst-item">
            <div class="box-number">
                <em>예매번호</em>
                <strong>${ticket.scheduleDTO.hallDTO.theater.tcode}<i>${ticket.ticode}</i></strong>
                <span></span>
            </div>
            <div class="box-image">
                <a href="/movies/detail-view/${ticket.scheduleDTO.mcode}">
			                    <span class="thumb-image">
				                    <img src="${src}" alt="포스터" onerror="errorImage(this)">
			                    </span>
                </a>
            </div>
            <div class="box-contents has_not_storeitem">
                <dl>
                    <dt>
                        <a href="/movies/detail-view/${ticket.scheduleDTO.mcode}">${ticket.scheduleDTO.movieDTO.titleKo}</a>

                    </dt>
                    <dd>
                        <em>관람극장</em>
                        <strong>${ticket.scheduleDTO.hallDTO.theater.tname}</strong>

                        <a href="/theaters/${ticket.scheduleDTO.hallDTO.theater.tcode}">[극장정보]</a>
                    </dd>
                    <dd>
                        <em>관람일시</em>
                        <strong>${ticket.scheduleDTO.scdate.replace('T',' ').match('\\d+-\\d+-\\d+ \\d+:\\d+')[0]}</strong>
                    </dd>
                    <dd>
                        <em>관람좌석</em>
                        <strong>${ticket.seat}</strong>
                    </dd>
                </dl>
            </div>
            <div class="box-detail">

            </div>
            <div class="price-n-btns">
                <div class="bd-wrap">
                    <dl>
                        <dt>총 결제금액</dt>
                        <dd>
                            <strong class="txt-lightblue">
                               ${Number(ticket.totprice).toLocaleString('ko-KR')}원</strong>
                        </dd>
                    </dl>
                    <div class="set-btn">
                        <input type="hidden" class="reserve-no" name="reserve-no" value="b2tybRe/6gTzeixNTuYpCdT74+dEUI4W3FeH+r+SjI0=">

                            <button type="button" class="round black" onclick="fnTicketCancle(${ticket.ticode})"><span>예매취소</span></button>

                    </div>
                </div>
            </div>
            </div>
`
        })

    }


// 예매 취소 요청시 function
function fnTicketCancle(ticode){
        console.log(ticode)
        if(confirm("예매를 취소하시겠습니까?")){
            fetch("/api/deleteSchedule/"+ticode);
            document.querySelector('.mask').style.display="block";
            document.querySelector('.cancelPopup').style.display="block";



        }

}

    // 취소 팝업 닫기 클릭시 닫기 function
    function btnClose(){
        document.querySelector('.mask').style.display="none";
        document.querySelector('.cancelPopup').style.display="none";
        location.href="/user/mycgv"
    }



</script>
</html>