<!DOCTYPE html>
<html lang="ko"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org/">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=1024" />
    <meta name="title" content="CJ CGV" />
    <meta name="description" content="CJ CGV" />
    <title id="ctl00_headerTitle">영화 그 이상의 감동. CGV</title>
    <link rel="shortcut icon" type="image/x-icon" href="https://img.cgv.co.kr/R2014/images/favicon.ico" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/reset.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/layout.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/module.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/common.css" />
    <link rel="stylesheet" media="all" type="text/css" href="https://img.cgv.co.kr/R2014/css/content.css" />
    <link rel="stylesheet" media="print" type="text/css" href="https://img.cgv.co.kr/R2014/css/print.css" />
    <link rel="stylesheet" type="text/css" href="https://img.cgv.co.kr/R2014/js/jquery.ui/smoothness/jquery-ui-1.10.4.custom.min.css" />
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/app.config.js"></script>
    <script type="text/javascript" src="/common/js/extraTheaters.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.validate.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.paging.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.ui/jquery-ui-1.10.4.custom.min.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.utils.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/app.utils.js"></script>
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/app.init.js"></script>
    <!--[if lte IE 9]><script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.placeholder.js"></script><![endif]-->
    <script type="text/javascript" src="https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.dotdotdot.min.js"></script>
    <!-- 각페이지 Header Start-->


    <!--/각페이지 Header End-->
    <script type="text/javascript">
        //<![CDATA[
        app.config('staticDomain', 'https://img.cgv.co.kr/R2014/')
            .config('imageDomain', 'https://img.cgv.co.kr')
            .config('isLogin', 'True');
        //]]>
    </script>
</head>
<body id="body">

<!-- Contents Start -->

<div class="layer-wrap" style="position:static; top:auto; left:auto;">
    <div class="popwrap" style="width:633px;">
        <h1>나의 프로필 수정</h1>
        <div class="pop-contents">
            <!-- Contents Addon -->
            <form name="aspnetForm" method="post" action="./edit-profile.aspx" id="aspnetForm" enctype="multipart/form-data">
                <div>
                    <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTEzMzEyMTU4NDhkZKBq30lYyDwm3Ruh/yZqZxg++4HF" />
                </div>

                <div>

                    <input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="4E92C5CF" />
                </div>
                <div class="sect-profile-modify">
                    <div class="profile-name">
                        <strong>공유님</strong>
                        <em>Gong-U</em>
                    </div>
                    <div class="profile-modify">
                        <dl>
                            <dt><strong>닉네임</strong></dt>
                            <dd>
                                <p>한글, 영문, 숫자 혼용 가능(한글 기준 10자 이내)</p>
                                <p>
                                    <label for="nick_name">닉네임 입력</label>
                                    <input type="hidden" id="ori_nick_name" name="ori_nick_name" value="" />
                                    <input type="text" id="nick_name" name="nick_name" value="" required="required" maxlength="10" class="s-medium" />
                                    <button id="check_duplication" type="button" class="round black"><span>중복확인</span></button>
                                </p>
                            </dd>
                            <dt><strong>프로필이미지</strong></dt>
                            <dd>
                                <input type="hidden" id="user_image" name="user_image" value="" />
                                <input type="hidden" id="user_small_image" name="user_small_image" value="" />
                                <div class="thumb-image">
                                    <img id="profile_image" src="http://img.cgv.co.kr/R2014/images/common/default_profile.gif" alt="프로필 사진" onerror="errorImage(this, {type:'profile'})" />
                                    <span class="profile-mask"></span>

                                </div>
                                <div class="profile-search">
                                    <p>JPG, GIF, BMP 파일만 등록 가능합니다.(최대 3M)</p>
                                    <input id="profile_upload_file" name="profile_upload_file" type="file" title="프로필사진 업로드" />
                                </div>
                            </dd>
                        </dl>
                    </div>
                </div>
                <div class="set-btn">
                    <button type="submit" id="save" class="round inblack"><span>등록하기</span></button>
                    <button type="button" id="btn_cancel" class="round gray"><span>취소</span></button>
                </div>
            </form>
            <!-- //Contents Addon -->
        </div>
        <button type="button" id="btn_close" class="btn-close">나의 프로필 수정 팝업 닫기</button>
    </div>
</div>

<script type="text/javascript">
    //<![CDATA[

    (function ($) {
        $(function () {

            $('#btn_cancel').on('click', function () {
                window.close();
            });

            $('#btn_close').on('click', function () {
                window.close();
            });

            $('#delete_image').on('click', function () {
                if (!confirm('설정된 프로필 이미지를 삭제 하시겠습니까?'))
                    return;

                $('#profile_image').attr('src', '');
                $('#user_small_image').val('');
                $('#user_image').val('');
                $('#delete_image').remove();
            }); ;
            $('#check_duplication').on('click', function () {
                var _this = $(this);
                var nickNameObj = $('#nick_name');

                if (nickNameObj.val() == '') {
                    alert('닉네임을 입력해 주세요.');
                    return nickNameObj.focus();
                }

                var url = '/common/ajax/user.aspx/CheckDuplicationByNickName';
                var data = { 'nickName': nickNameObj.val() };

                var callback = function (result) {
                    if (result == null || result.resultCode == null) return;
                    var resultCode = result.resultCode;

                    if (resultCode == "") {
                        alert("오류가 발생하였습니다.");
                        _this.attr('data', 0);
                    }
                    else if (resultCode != "0") {
                        alert('이미 사용중인 닉네임입니다.');
                        nickNameObj.focus();
                        _this.attr('data', 0);
                    }
                    else {
                        alert('사용가능한 닉네임입니다.');
                        _this.attr('data', 1);
                    }
                };

                app.ajax().set({ dataType: 'json', url: url, data: JSON.stringify(data), contentType: "application/json; charset=utf-8", successHandler: callback });
            });

            $('#save').on('click', function () {
                if ($('#ori_nick_name').val() != $('#nick_name').val() && $('#check_duplication').attr('data') != 1) {
                    alert('닉네임 중복확인 해주세요.');
                    $('#check_duplication').focus();
                    return false;
                }
            });

        });
    })(jQuery);

    //]]>
</script>
<script type="text/javascript">
    _TRK_CP = "/팝업/나의프로필수정";
</script>

<!--/ Contents End -->


<script type="text/javascript">
    //<![CDATA[


    //    function setWindowResize() {
    //        //var thisX = parseInt(document.body.scrollWidth);
    //        //var thisY = parseInt(document.body.scrollHeight);
    //        var thisX = parseInt(document.getElementById("popup").scrollWidth);
    //        var thisY = parseInt(document.getElementById("popup").scrollHeight);

    //        var maxThisX = screen.width - 50;
    //        var maxThisY = screen.height - 50;
    //        var marginY = 0;
    //        // alert(thisX + "===" + thisY);
    //        //alert!("임시 브라우저 확인 : " + navigator.userAgent);
    //        // 브라우저별 높이 조절. (표준 창 하에서 조절해 주십시오.)
    //        if (navigator.userAgent.indexOf("MSIE 6") > 0) marginY = 45;        // IE 6.x
    //        else if (navigator.userAgent.indexOf("MSIE 7") > 0) marginY = 75;    // IE 7.x
    //        else if (navigator.userAgent.indexOf("MSIE 9") > 0) marginY = 80;    // IE 9.x
    //        else if (navigator.userAgent.indexOf("Firefox") > 0) marginY = 80;   // FF     => 원래는 50 이었는데 해보니 안돼서 임의로 변경해보았다 ㅡㅡ;;
    //        else if (navigator.userAgent.indexOf("Opera") > 0) marginY = 30;     // Opera
    //        else if (navigator.userAgent.indexOf("Chrome") > 0) marginY = 70;     // Chrome
    //        else if (navigator.userAgent.indexOf("Netscape") > 0) marginY = -2;  // Netscape

    //        if (thisX > maxThisX) {
    //            window.document.body.scroll = "yes";
    //            thisX = maxThisX;
    //        }
    //        if (thisY > maxThisY - marginY) {
    //            window.document.body.scroll = "yes";
    //            thisX += 19;
    //            thisY = maxThisY - marginY;
    //        }
    //        window.resizeTo(thisX + 10, thisY + marginY);

    //        var windowX = (screen.width - (thisX + 10)) / 2;
    //        var windowY = (screen.height - (thisY + marginY)) / 2 - 20;
    //        window.moveTo(windowX, windowY);
    //    }

    (function ($) {
        $(function () {

            //브라우저별 사이즈 다름 빈사이즈 체크를 위해 사이즈 임시 통일화

//            var minWidth = 100;
//            var minHeight = 10;

//            window.resizeTo(minWidth, minHeight);

//            //브라우저전체 사이즈 (주소창포함)
//            var clientWidth = document.documentElement.clientWidth;
//            var clientHeight = document.documentElement.clientHeight;

//            //차이나는 값
//            var marginWidth = clientWidth - minWidth;
//            var marginHeight = clientHeight - minHeight;

//            var nw = $('.popwrap').width() + marginWidth;
//            var nh = $('.popwrap').height() + marginHeight;
//            //window.resizeTo(nw, nh);

            var bWidth = parseInt(document.body.scrollWidth) + (navigator.userAgent.indexOf("MSIE") > 0 ? 16 : 0);
            var bHeight = parseInt(document.body.scrollHeight) + (navigator.userAgent.indexOf("MSIE") > 0 ? 14 : 0);

            var nw = (!scroll) ? document.documentElement.clientWidth : document.documentElement.clientWidth + 17;
            var nh = (!scroll) ? document.documentElement.clientHeight : document.documentElement.clientHeight + 17;

            w = bWidth - nw;
            h = bHeight - nh;

            if ((nw != w && (nw - 1) != w && (nw + 1) != w) || nh != h) {
                if (w > screen.width || h > screen.height) {
                    document.documentElement.style.overflow = "auto";

                    if (w < screen.width)
                        document.documentElement.style.overflowX = "hidden";

                    if (h < screen.height)
                        document.documentElement.style.overflowY = "hidden";
                }
                else
                    document.documentElement.style.overflow = "hidden";

                window.resizeBy(w, h);
            }
        });

    })(jQuery);
    //]]>
</script>

<script language="javascript" type="text/javascript">
    //201402 SYH GA추가
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-47126437-1', 'cgv.co.kr');
    ga('create', 'UA-47951671-5', 'cgv.co.kr', { 'name': 'cgvTracker' });
    ga('send', 'pageview');
    ga('cgvTracker.send', 'pageview');
</script>

<!-- 비즈스프링 통계태그 -->
<script type="text/javascript">
    //팝업 depth설정필요
</script>
<script type="text/javascript" language="javascript" src="https://img.cgv.co.kr/common/js/insightIS.js"></script>

</body>
</html>
